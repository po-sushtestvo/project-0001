<!DOCTYPE html>
<html class="wide wow-animation" lang="en">
  <head>
    <title>Галерия</title>
    <meta name="format-detection" content="telephone=no">
    <meta name="viewport" content="width=device-width, height=device-height, initial-scale=1.0, maximum-scale=1.0, user-scalable=0">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta charset="utf-8">
    <link rel="icon" href="images/favicon.ico" type="image/x-icon">
    <!-- Stylesheets-->
    <link rel="stylesheet" type="text/css" href="//fonts.googleapis.com/css?family=Montserrat:400,500,600,700%7CPoppins:400%7CTeko:300,400">
    <link rel="stylesheet" href="css/bootstrap.css">
    <link rel="stylesheet" href="css/fonts.css">
    <link rel="stylesheet" href="css/style.css">
    <style>
      .ie-panel{display: none;background: #212121;padding: 10px 0;box-shadow: 3px 3px 5px 0 rgba(0,0,0,.3);clear: both;text-align:center;position: relative;z-index: 1;}
      html.ie-10 .ie-panel, html.lt-ie-10 .ie-panel {display: block;}

      /* === Галерия стилове === */
      .frame {
        background: white;
        border: 2px dashed #ccc;
        border-radius: 8px;
        padding: 15px;
        text-align: center;
        opacity: 0;
        animation: fadeIn 0.6s forwards;
        height: 100%;
        display: flex;
        flex-direction: column;
        justify-content: center;
        align-items: center;
      }

      .frame img {
        width: 100%;
        height: 250px; /* Фиксирана височина */
        object-fit: cover; /* Обрязва и центрира снимката */
        border-radius: 4px;
        cursor: pointer;
        transition: transform 0.3s, opacity 0.3s;
      }

      .frame img:hover {
        opacity: 0.9;
        transform: scale(1.03);
      }

      .file-input {
        display: none;
      }

      @keyframes fadeIn {
        to { opacity: 1; }
      }

      /* === Модален прозорец за снимка === */
      .modal {
        display: none;
        position: fixed;
        top: 0;
        left: 0;
        width: 100%;
        height: 100%;
        background: rgba(0, 0, 0, 0.9);
        z-index: 1000;
        justify-content: center;
        align-items: center;
      }

      .modal-content {
        max-width: 90%;
        max-height: 90%;
        object-fit: contain;
        border: 3px solid white;
        box-shadow: 0 0 20px rgba(255,255,255,0.5);
      }
    </style>
  </head>
  <body>
    <div class="ie-panel"><a href="http://windows.microsoft.com/en-US/internet-explorer/"><img src="images/ie8-panel/warning_bar_0000_us.jpg" height="42" width="820" alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today."></a></div>
    <div class="preloader">
      <div class="preloader-body">
        <div class="cssload-container">
          <div class="cssload-speeding-wheel"></div>
        </div>
        <p>Зареждане...</p>
      </div>
    </div>
    <div class="page">
      <header class="section page-header">
        <!-- RD Navbar (оставен непроменен) -->
        <div class="rd-navbar-wrap">
          <nav class="rd-navbar rd-navbar-corporate" data-layout="rd-navbar-fixed" data-sm-layout="rd-navbar-fixed" data-md-layout="rd-navbar-fixed" data-md-device-layout="rd-navbar-fixed" data-lg-layout="rd-navbar-static" data-lg-device-layout="rd-navbar-fixed" data-xl-layout="rd-navbar-static" data-xl-device-layout="rd-navbar-static" data-xxl-layout="rd-navbar-static" data-xxl-device-layout="rd-navbar-static" data-lg-stick-up-offset="46px" data-xl-stick-up-offset="46px" data-xxl-stick-up-offset="106px" data-lg-stick-up="true" data-xl-stick-up="true" data-xxl-stick-up="true">
            <div class="rd-navbar-collapse-toggle rd-navbar-fixed-element-1" data-rd-navbar-toggle=".rd-navbar-collapse"><span></span></div>
            <div class="rd-navbar-aside-outer">
              <div class="rd-navbar-aside">
                <div class="rd-navbar-panel">
                  <button class="rd-navbar-toggle" data-rd-navbar-toggle=".rd-navbar-nav-wrap"><span></span></button>
                  <div class="rd-navbar-brand">
                    <a class="brand" href="index.html"><img src="images/logo-default-450x37.png" alt="" width="225" height="18"/></a>
                  </div>
                </div>
                <div class="rd-navbar-aside-right rd-navbar-collapse">
                  <ul class="rd-navbar-corporate-contacts">
                    <li>
                      <div class="unit unit-spacing-xs">
                        <div class="unit-left"><span class="icon fa fa-clock-o"></span></div>
                        <div class="unit-body">
                          <p>09:00<span>am</span> — 05:00<span>pm</span></p>
                        </div>
                      </div>
                    </li>
                    <li>
                      <div class="unit unit-spacing-xs">
                        <div class="unit-left"><span class="icon fa fa-phone"></span></div>
                        <div class="unit-body"><a class="link-phone" href="tel:#">+359 89 736 1520</a></div>
                      </div>
                    </li>
                  </ul><a class="button button-md button-default-outline-2 button-ujarak" href="#">Запиши се</a>
                </div>
              </div>
            </div>
            <div class="rd-navbar-main-outer">
              <div class="rd-navbar-main">
                <div class="rd-navbar-nav-wrap">
                  <ul class="list-inline list-inline-md rd-navbar-corporate-list-social">
                   <li><a class="icon fa fa-facebook" href="https://www.facebook.com/profile.php?id=100072458323882&sk=photos_by"></a></li>
                    <li><a class="icon fa fa-instagram" href="  https://www.instagram.com/pirinska_kitka/  "></a></li>
                  </ul>
                  <ul class="rd-navbar-nav">
                    <li class="rd-nav-item"><a class="rd-nav-link" href="index.html">Начало</a></li>
                    <li class="rd-nav-item"><a class="rd-nav-link" href="about.html">Информация</a></li>
                    <li class="rd-nav-item active"><a class="rd-nav-link" href="typography.html">Галерия</a></li>
                    <li class="rd-nav-item"><a class="rd-nav-link" href="contact-us.html">Контакти</a></li>
                  </ul>
                </div>
              </div>
            </div>
          </nav>
        </div>
      </header>

      <!-- Breadcrumbs -->
      <section class="breadcrumbs-custom-inset">
        <div class="breadcrumbs-custom context-dark bg-overlay-60">
          <div class="container">
            <h2 class="breadcrumbs-custom-title">Галерия</h2>
            <ul class="breadcrumbs-custom-path">
              <li><a href="index.html">Home</a></li>
              <li class="active">Галерия</li>
            </ul>
          </div>
          <div class="box-position" style="background-image: url(images/breadcrumbs-bg.jpg);"></div>
        </div>
      </section>

      <!-- ГАЛЕРИЯ СЕКЦИЯ -->
      <section class="section section-sm bg-default text-left">
        <div class="container">
          <div id="gallery" class="row row-cols-1 row-cols-md-3 g-4"></div>
          <div class="text-center mt-4">
            <button id="addNewFrame" class="button button-primary button-ujarak">Добави още</button>
          </div>
        </div>
      </section>

      <!-- Модален прозорец -->
      <div id="imageModal" class="modal">
        <img class="modal-content" id="modalImage">
      </div>

      <!-- Footer (оставен непроменен) -->
      <footer class="section footer-corporate context-dark">
        <div class="footer-corporate-inset">
          <div class="container">
            <div class="row row-40 justify-content-lg-between">
              <div class="col-sm-6 col-md-12 col-lg-3 col-xl-4">
                <div class="oh-desktop">
                  <div class="wow slideInRight" data-wow-delay="0s">
                    <h6 class="text-spacing-100 text-uppercase">Контакти</h6>
                    <ul class="footer-contacts d-inline-block d-sm-block">
                      <li>
                        <div class="unit">
                          <div class="unit-left"><span class="icon fa fa-phone"></span></div>
                          <div class="unit-body"><a class="link-phone" href="tel:#">+359 89 736 1520</a></div>
                        </div>
                      </li>
                      <li>
                        <div class="unit">
                          <div class="unit-left"><span class="icon fa fa-envelope"></span></div>
                          <div class="unit-body"><a class="link-aemail" href="mailto:#">info@pirinska-kitka.com</a></div>
                        </div>
                      </li>
                      <li>
                        <div class="unit">
                          <div class="unit-left"><span class="icon fa fa-location-arrow"></span></div>
                          <div class="unit-body">
  <a class="link-location" href="https://www.google.com/maps?q=Вароша,+ул.+„Бистрица“+1,+2700+Благоевград" target="_blank">
    Вароша, ул. „Бистрица“ 1, 2700 Благоевград
  </a>
</div>
                        </div>
                      </li>
                    </ul>
                  </div>
                </div>
              </div>
              <div class="col-sm-6 col-md-5 col-lg-3 col-xl-4">
                <div class="oh-desktop">
                  <div class="wow slideInDown" data-wow-delay="0s">
                    <h6 class="text-spacing-100 text-uppercase">Концерти</h6>
                    <article class="post post-minimal-2">
                      <p class="post-minimal-2-title"><a href="#">60 години - <b>"Пиринска Китка"</b></a></p>
                      <div class="post-minimal-2-time"><time datetime="2019-05-04">Юни 16, 2025</time></div>
                    </article>
                    <article class="post post-minimal-2">
                      <p class="post-minimal-2-title"><a href="#">70 години -<b>"Отец Паисий" САЩ</b></a></p>
                      <div class="post-minimal-2-time"><time datetime="2019-05-04">Юни 17, 2025</time></div>
                    </article>
                  </div>
                </div>
              </div>
              <div class="col-sm-11 col-md-7 col-lg-5 col-xl-4">
                <div class="oh-desktop">
                  <div class="wow slideInLeft" data-wow-delay="0s">
                    <h6 class="text-spacing-100 text-uppercase">Страници</h6>
                    <ul class="row-6 list-0 list-marked list-marked-md list-marked-secondary list-custom-2">
                      <li><a href="about.html">Информация</a></li>
                      <li><a href="typography.html">Галерия</a></li>
                      <li><a href="contact-us.html">Контакти</a></li>
                      <li><a href="#">Концерти</a></li>
                      <li><a href="#">Постижения</a></li>
                    </ul>
                    <div class="group-md group-middle justify-content-sm-start"><a class="button button-lg button-primary button-ujarak" href="#">Запиши се</a></div>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <div class="footer-corporate-bottom-panel">
          <div class="container">
            <div class="row justfy-content-xl-space-berween row-10 align-items-md-center2">
              <div class="col-sm-6 col-md-4 text-sm-right text-md-center">
                <div>

<p class="rights"><span>&copy;&nbsp;</span><span class="copyright-year"></span><span>&nbsp;</span><span>ДЮФА - "Пиринска Китка"</span>. Всички права запазени. Създадено от Клуб по програмиране</span> "По същество"</p>
              </div>
          </div>
          <div class="col-sm-6 col-md-4 order-sm-first"></div>
              <div class="col-sm-6 col-md-4 text-md-right">
             <ul class="list-inline list-inline-sm footer-social-list-2">
                    <li><a class="icon fa fa-facebook" href="  https://www.facebook.com/profile.php?id=100072458323882&sk=photos_by"></a></li>
                    <li><a class="icon fa fa-instagram" href="    https://www.instagram.com/pirinska_kitka/    "></a></li>
                  </ul>
              </div>
            </div>
          </div>
        </div>
      </footer>
    </div>

    <!-- Global Mailform Output -->
    <div class="snackbars" id="form-output-global"></div>

    <!-- Javascript -->
    <script src="js/core.min.js"></script>
    <script src="js/script.js"></script>

    <!-- Галерия скрипт -->
    <script>
      document.addEventListener('DOMContentLoaded', () => {
        const gallery = document.getElementById('gallery');
        const addNewFrameBtn = document.getElementById('addNewFrame');
        const modal = document.getElementById('imageModal');
        const modalImg = document.getElementById('modalImage');

        // Затваряне на модала при клик навън или ESC
        modal.addEventListener('click', (e) => {
          if (e.target === modal) modal.style.display = 'none';
        });
        document.addEventListener('keydown', (e) => {
          if (e.key === 'Escape') modal.style.display = 'none';
        });

        loadImagesFromStorage();

        addNewFrameBtn.addEventListener('click', () => addFrame());

        function addFrame(imageData = null) {
          const col = document.createElement('div');
          col.className = 'col';

          const frame = document.createElement('div');
          frame.className = 'frame';

          if (imageData) {
            const img = document.createElement('img');
            img.src = imageData;
            img.alt = "Галерия снимка";
            img.onclick = () => {
              modalImg.src = imageData;
              modal.style.display = 'flex';
            };
            frame.appendChild(img);

            const removeBtn = document.createElement('button');
            removeBtn.className = 'button button-sm button-secondary mt-2';
            removeBtn.textContent = 'Премахни';
            removeBtn.onclick = () => {
              gallery.removeChild(col);
              removeImageFromStorage(imageData);
            };
            frame.appendChild(removeBtn);
          } else {
            const fileInput = document.createElement('input');
            fileInput.type = 'file';
            fileInput.className = 'file-input';
            fileInput.accept = 'image/*';

            const addBtn = document.createElement('button');
            addBtn.className = 'button button-sm button-primary';
            addBtn.textContent = 'Добави';
            addBtn.onclick = () => fileInput.click();

            fileInput.addEventListener('change', (e) => {
              const file = e.target.files[0];
              if (file) {
                const reader = new FileReader();
                reader.onload = (ev) => {
                  const dataUrl = ev.target.result;
                  frame.innerHTML = '';
                  const img = document.createElement('img');
                  img.src = dataUrl;
                  img.alt = "Галерия снимка";
                  img.onclick = () => {
                    modalImg.src = dataUrl;
                    modal.style.display = 'flex';
                  };
                  frame.appendChild(img);

                  const removeBtn = document.createElement('button');
                  removeBtn.className = 'button button-sm button-secondary mt-2';
                  removeBtn.textContent = 'Премахни';
                  removeBtn.onclick = () => {
                    gallery.removeChild(col);
                    removeImageFromStorage(dataUrl);
                  };
                  frame.appendChild(removeBtn);

                  saveImageToStorage(dataUrl);
                };
                reader.readAsDataURL(file);
              }
            });

            frame.appendChild(addBtn);
            frame.appendChild(fileInput);
          }

          col.appendChild(frame);
          gallery.appendChild(col);
        }

        function saveImageToStorage(dataUrl) {
          const images = getStoredImages();
          images.push(dataUrl);
          localStorage.setItem('galleryImages', JSON.stringify(images));
        }

        function removeImageFromStorage(dataUrlToRemove) {
          let images = getStoredImages();
          images = images.filter(url => url !== dataUrlToRemove);
          localStorage.setItem('galleryImages', JSON.stringify(images));
        }

        function loadImagesFromStorage() {
          const images = getStoredImages();
          images.forEach(url => addFrame(url));
        }

        function getStoredImages() {
          const data = localStorage.getItem('galleryImages');
          return data ? JSON.parse(data) : [];
        }
      });
    </script>
  </body>
</html>